@model ProductViewModel    
        
<!-- card product 1 -->
<div class="card-product">
    <div class="card-product-wrapper">
        <a class="product-img">
            <img class="lazyload img-product" data-src="/images/products/@Model.ProductVariants?.FirstOrDefault()?.CoverImageName"
                 src="~/images/products/@Model.ProductVariants?.FirstOrDefault()?.CoverImageName" alt="image-product">

            @if (Model.ProductVariants?.Count > 1)
            {
                <img class="lazyload img-hover" data-src="/images/products/@Model.ProductVariants[1].CoverImageName"
                     src="~/images/products/@Model.ProductVariants[1].CoverImageName" alt="image-product">
            }

            @if (Model.ProductVariants?.Count == 1)
            {
                <img class="lazyload img-hover" data-src="/images/products/@Model.ProductVariants[0].CoverImageName"
                     src="~/images/products/@Model.ProductVariants[0].CoverImageName" alt="image-product">
            }
        </a>
        <div class="list-product-btn type-wishlist">
            <a onclick="deleteItemFromWishlist(@Model.Id, this)" class="box-icon bg_white wishlist">
                <span class="tooltip">Remove Wishlist</span>
                <span class="icon icon-delete"></span>
            </a>
        </div>
        <div class="list-product-btn">
            <a href="#quick_add" data-bs-toggle="modal"
               data-bs-target="#quick_add_@Model.Id"
               class="box-icon bg_white quick-add tf-btn-loading">
                <span class="icon icon-bag"></span>
                <span class="tooltip">Quick Add</span>
            </a>
            <a href="#compare" data-bs-toggle="offcanvas" aria-controls="offcanvasLeft"
               class="box-icon bg_white compare btn-icon-action">
                <span class="icon icon-compare"></span>
                <span class="tooltip">Add to Compare</span>
                <span class="icon icon-check"></span>
            </a>
            <a href="#" data-bs-toggle="modal" data-bs-target="#quick_view_@Model.Id"
               class="box-icon bg_white quickview tf-btn-loading quick-view-btn">
                <span class="icon icon-view"></span>
                <span class="tooltip">Quick View</span>
            </a>
        </div>
    </div>
    <div class="card-product-info">
        <a asp-controller="product" asp-action="details" asp-route-id="@Model.DetailsUrl" class="title link">@Model.Name</a>
        <span class="price current-price">$@Model.BasePrice</span>
        <ul class="list-color-product">
            @foreach (var variant in Model.ProductVariants ?? [])
            {
                <li class="list-color-item color-swatch">
                    <span class="tooltip tooltip-bottom">@variant.ColorName</span>
                    <span class="@variant.ColorIconName"></span>
                    <img class="lazyload" data-src="images/products/@variant.CoverImageName"
                         src="~/images/products/@variant.CoverImageName" alt="image-product">
                </li>
            }
        </ul>
    </div>
</div>


<script>
function deleteItemFromWishlist(id, element){
    fetch(`/account/removefromwishlist/${id}`, {
    method:'POST'})
    .then(response=>response.text())
    .then(data=>{
        element.parentNode.parentNode.parentNode.remove();
    });
}
</script>